'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.ConfigContract=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const formik_1=require('formik');const react_1=require('react');const react_router_dom_1=require('react-router-dom');const context_1=require('../state/context');const types_1=require('../state/types');const formik_material_ui_1=require('formik-material-ui');const TitleBlock_1=require('../../../common/TitleBlock');const utils_1=require('../../utils');const ButtonContainer=(0,core_1.styled)(core_1.Grid)({marginTop:40});const CustomTextarea=(0,core_1.styled)((0,core_1.withTheme)(core_1.TextareaAutosize))(props=>({'minHeight':152,'boxSizing':'border-box','width':'100%','marginTop':14,'fontWeight':400,'padding':'21px 20px','fontFamily':'Roboto Mono','border':'none','fontSize':16,'color':props.theme.palette.text.secondary,'background':'#2F3438','borderRadius':8,'paddingRight':40,'wordBreak':'break-word','&:focus-visible':{outline:'none'},'resize':'none'}));const CustomFormikTextField=(0,core_1.withStyles)({root:{'& .MuiInput-root':{fontWeight:300,textAlign:'initial'},'& .MuiInputBase-input':{textAlign:'initial'},'& .MuiInput-underline:before':{borderBottom:'none !important'},'& .MuiInput-underline:hover:before':{borderBottom:'none !important'},'& .MuiInput-underline:after':{borderBottom:'none !important'}},disabled:{}})(formik_material_ui_1.TextField);const CustomInputContainer=(0,core_1.styled)(core_1.Grid)(({theme})=>({height:54,boxSizing:'border-box',marginTop:14,background:'#2F3438',borderRadius:8,alignItems:'center',display:'flex',padding:'13px 23px'}));const ErrorText=(0,core_1.styled)(core_1.Typography)({fontSize:14,color:'red'});const TextareaContainer=(0,core_1.styled)(core_1.Grid)({display:'flex',position:'relative'});const validateForm=values=>{const errors={};if(!values.name){errors.name='Required';}if(!values.description){errors.description='Required';}if(!values.totalSupply||values.totalSupply===null){errors.totalSupply='Required';}if(!values.decimals||values.decimals===null){errors.decimals='Required';}if(!values.symbol){errors.symbol='Required';}return errors;};const TokenSettingsForm=({submitForm,values,errors,touched,setFieldValue,setFieldTouched})=>{const {dispatch}=(0,react_1.useContext)(context_1.DeploymentContext);const match=(0,react_router_dom_1.useRouteMatch)();const history=(0,react_router_dom_1.useHistory)();(0,react_1.useEffect)(()=>{if(values){dispatch({type:types_1.ActionTypes.UPDATE_NAVIGATION_BAR,next:{handler:()=>{submitForm(values);},text:'Continue'}});}},[dispatch,errors,history,match.path,match.url,submitForm,values]);return(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:12,container:true,direction:'row',style:{gap:32},children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:12,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle1',color:'textSecondary',children:[' ','Contract name',' ']}),(0,jsx_runtime_1.jsx)(CustomInputContainer,{children:(0,jsx_runtime_1.jsx)(formik_1.Field,{id:'outlined-basic',placeholder:'Contract name',name:'name',component:CustomFormikTextField})}),errors.name&&touched.name?(0,jsx_runtime_1.jsx)(ErrorText,{children:errors.name}):null]}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:12,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle1',color:'textSecondary',children:[' ','Description',' ']}),(0,jsx_runtime_1.jsx)(TextareaContainer,{item:true,xs:12,children:(0,jsx_runtime_1.jsx)(formik_1.Field,{name:'description',children:()=>(0,jsx_runtime_1.jsx)(CustomTextarea,{maxLength:1500,'aria-label':'empty textarea',placeholder:'Description',value:(0,formik_1.getIn)(values,'description'),onChange:newValue=>{setFieldValue('description',newValue.target.value);}})})}),errors.description&&touched.description?(0,jsx_runtime_1.jsx)(ErrorText,{children:errors.description}):null]}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'row',spacing:2,children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:6,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle1',color:'textSecondary',children:[' ','Supply',' ']}),(0,jsx_runtime_1.jsx)(CustomInputContainer,{children:(0,jsx_runtime_1.jsx)(formik_1.Field,{id:'outlined-basic',type:'number',placeholder:'Supply',name:'totalSupply',component:CustomFormikTextField,onKeyDown:e=>(0,utils_1.handleNegativeInput)(e)})}),errors.totalSupply&&touched.totalSupply?(0,jsx_runtime_1.jsx)(ErrorText,{children:errors.totalSupply}):null]}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:6,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle1',color:'textSecondary',children:[' ','Decimals',' ']}),(0,jsx_runtime_1.jsx)(CustomInputContainer,{children:(0,jsx_runtime_1.jsx)(formik_1.Field,{id:'outlined-basic',type:'number',placeholder:'Decimals',name:'decimals',component:CustomFormikTextField,onKeyDown:e=>(0,utils_1.handleChange)(e)})}),errors.decimals&&touched.decimals?(0,jsx_runtime_1.jsx)(ErrorText,{children:errors.decimals}):null]})]}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'row',spacing:2,children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:6,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle1',color:'textSecondary',children:[' ','Symbol',' ']}),(0,jsx_runtime_1.jsx)(CustomInputContainer,{children:(0,jsx_runtime_1.jsx)(formik_1.Field,{id:'outlined-basic',placeholder:'Symbol',name:'symbol',component:CustomFormikTextField})}),errors.symbol&&touched.symbol?(0,jsx_runtime_1.jsx)(ErrorText,{children:errors.symbol}):null]}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:6,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle1',color:'textSecondary',children:[' ','Icon',' ']}),(0,jsx_runtime_1.jsx)(CustomInputContainer,{children:(0,jsx_runtime_1.jsx)(formik_1.Field,{id:'outlined-basic',placeholder:'Icon',name:'icon',component:CustomFormikTextField})})]})]})]})});};const ConfigContract=()=>{const {state,dispatch,updateCache}=(0,react_1.useContext)(context_1.DeploymentContext);const {tokenSettings}=state.data;const history=(0,react_router_dom_1.useHistory)();const saveStepInfo=(values,{setSubmitting})=>{const newValues=Object.assign({},values);const newState=Object.assign(Object.assign({},state.data),{tokenSettings:newValues});updateCache(newState);setSubmitting(true);dispatch({type:types_1.ActionTypes.UPDATE_TOKEN_SETTINGS,contractInfo:newValues});history.push(`distribution`);};return(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{children:(0,jsx_runtime_1.jsx)(TitleBlock_1.TitleBlock,{title:'Configure token contract',description:''})}),(0,jsx_runtime_1.jsx)(formik_1.Formik,{enableReinitialize:true,validateOnChange:true,validateOnBlur:false,validate:validateForm,onSubmit:saveStepInfo,initialValues:tokenSettings,children:({submitForm,isSubmitting,setFieldValue,values,errors,touched,setFieldTouched})=>{return(0,jsx_runtime_1.jsx)(formik_1.Form,{style:{width:'100%'},children:(0,jsx_runtime_1.jsx)(TokenSettingsForm,{submitForm:submitForm,isSubmitting:isSubmitting,setFieldValue:setFieldValue,errors:errors,touched:touched,values:values,setFieldTouched:setFieldTouched})});}})]})});};exports.ConfigContract=ConfigContract;