'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.ContractSummary=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=require('react');const core_1=require('@material-ui/core');const react_router_dom_1=require('react-router-dom');const utils_1=require('../../../../services/contracts/utils');const context_1=require('../state/context');const utils_2=require('../state/utils');const bignumber_js_1=__importDefault(require('bignumber.js'));const Blockie_1=require('../../../common/Blockie');const CopyButton_1=require('../../../common/CopyButton');const types_1=require('../state/types');const TitleBlock_1=require('../../../common/TitleBlock');const useToken_1=require('../../../../services/contracts/token/hooks/useToken');const useNotification_1=require('../../../common/hooks/useNotification');const ThirdContainer=(0,core_1.styled)(core_1.Grid)({marginTop:22,background:'#2F3438',borderRadius:8,boxSizing:'border-box'});const ThirdContainerFirstRow=(0,core_1.styled)(core_1.Grid)({padding:'19px 48px',borderBottom:'0.3px solid #7D8C8B',alignItems:'center',display:'flex',minHeight:70,['@media (max-width:1167px)']:{padding:'12px 15px',maxHeight:'inherit'}});const ThirdContainerLastRow=(0,core_1.styled)(core_1.Grid)({padding:'19px 48px',alignItems:'center',display:'flex',minHeight:70,['@media (max-width:1167px)']:{padding:'12px 15px',maxHeight:'inherit'}});const ThirdContainerRow=(0,core_1.styled)(core_1.Grid)({'borderBottom':'0.3px solid #7D8C8B','padding':'24px 48px','minHeight':70,['@media (max-width:1167px)']:{padding:'12px 15px',maxHeight:'inherit'},'&:last-child':{borderBottom:'none'}});const TitleSpacing=(0,core_1.styled)(core_1.Typography)({marginTop:8,fontWeight:200});const ContainerEdit=(0,core_1.styled)(core_1.Typography)({cursor:'pointer'});const AdminAddress=(0,core_1.styled)(core_1.Typography)({wordBreak:'break-all'});const KeyText=(0,core_1.styled)(core_1.Typography)({fontWeight:300});const AddressText=(0,core_1.styled)(core_1.Typography)({marginLeft:12,fontWeight:300});const ContractSummary=()=>{const theme=(0,core_1.useTheme)();const isMobile=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const history=(0,react_router_dom_1.useHistory)();const match=(0,react_router_dom_1.useRouteMatch)();const openNotification=(0,useNotification_1.useNotification)();const {state,dispatch}=(0,react_1.useContext)(context_1.DeploymentContext);const {tokenDistribution,tokenSettings}=state.data;const [isLoading,setIsLoading]=(0,react_1.useState)(false);const goToSettings=()=>{history.push(`config`);};const goToDistribution=()=>{history.push(`distribution`);};const {mutation:{mutate,data,error}}=(0,useToken_1.useTokenOriginate)(state.data);(0,react_1.useEffect)(()=>{if(data&&data.address){dispatch({type:types_1.ActionTypes.CLEAR_CACHE});history.push('/creator/success',{address:data.address});}},[data,dispatch,history]);(0,react_1.useEffect)(()=>{if(error){setIsLoading(false);openNotification({message:'Error deploying token... try again later',variant:'error',autoHideDuration:2000});}},[error,openNotification]);(0,react_1.useEffect)(()=>{dispatch({type:types_1.ActionTypes.UPDATE_NAVIGATION_BAR,back:{handler:()=>history.push(`distribution`),text:'Back'},next:{handler:()=>{mutate(Object.assign({},state.data));setIsLoading(true);},text:isLoading?'Deploying...':'Launch'}});},[dispatch,history,match.path,match.url,mutate,state.data,isLoading]);return(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{children:(0,jsx_runtime_1.jsx)(TitleBlock_1.TitleBlock,{title:'Review information',description:'and make sure you\'ve set up your token right.'})}),(0,jsx_runtime_1.jsxs)(ThirdContainer,{container:true,direction:'row',children:[(0,jsx_runtime_1.jsx)(ThirdContainerFirstRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:isMobile?'column':'row',alignItems:isMobile?'baseline':'center',justifyContent:'space-between',children:[(0,jsx_runtime_1.jsx)(TitleSpacing,{color:'textSecondary',variant:'subtitle1',children:'TOKEN CONTRACT SETTINGS'}),(0,jsx_runtime_1.jsx)(ContainerEdit,{color:'secondary',onClick:goToSettings,children:'Edit'})]})}),(0,jsx_runtime_1.jsx)(ThirdContainerRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'row',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:5,children:(0,jsx_runtime_1.jsx)(KeyText,{variant:'subtitle2',color:'textSecondary',children:'Name'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:7,children:(0,jsx_runtime_1.jsx)(AdminAddress,{variant:'subtitle2',color:'textSecondary',align:'right',children:tokenSettings.name})})]})}),(0,jsx_runtime_1.jsx)(ThirdContainerRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'row',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:5,children:(0,jsx_runtime_1.jsx)(KeyText,{variant:'subtitle2',color:'textSecondary',children:'Description'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:7,children:(0,jsx_runtime_1.jsx)(AdminAddress,{variant:'subtitle2',color:'textSecondary',align:'right',children:tokenSettings.description})})]})}),(0,jsx_runtime_1.jsx)(ThirdContainerRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'row',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:5,children:(0,jsx_runtime_1.jsx)(KeyText,{variant:'subtitle2',color:'textSecondary',children:'Symbol'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:7,children:(0,jsx_runtime_1.jsx)(AdminAddress,{variant:'subtitle2',color:'textSecondary',align:'right',children:tokenSettings.symbol})})]})}),(0,jsx_runtime_1.jsx)(ThirdContainerRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'row',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:5,children:(0,jsx_runtime_1.jsx)(KeyText,{variant:'subtitle2',color:'textSecondary',children:'Supply'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:7,children:(0,jsx_runtime_1.jsx)(AdminAddress,{variant:'subtitle2',color:'textSecondary',align:'right',children:(0,utils_2.numberWithCommas)(new bignumber_js_1.default(Number(tokenSettings.totalSupply)))})})]})}),(0,jsx_runtime_1.jsx)(ThirdContainerLastRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'row',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:5,children:(0,jsx_runtime_1.jsx)(KeyText,{variant:'subtitle2',color:'textSecondary',children:'Icon'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:7,children:(0,jsx_runtime_1.jsx)(AdminAddress,{variant:'subtitle2',color:'textSecondary',align:'right',children:tokenSettings.icon})})]})})]}),(0,jsx_runtime_1.jsxs)(ThirdContainer,{container:true,direction:'row',children:[(0,jsx_runtime_1.jsx)(ThirdContainerFirstRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:isMobile?'column':'row',alignItems:isMobile?'baseline':'center',justifyContent:'space-between',children:[(0,jsx_runtime_1.jsx)(TitleSpacing,{color:'textSecondary',variant:'subtitle1',children:'INITIAL DISTRIBUTION'}),(0,jsx_runtime_1.jsx)(ContainerEdit,{color:'secondary',onClick:goToDistribution,children:'Edit'})]})}),tokenDistribution.holders&&tokenDistribution.holders.length>0?tokenDistribution.holders.map((holder,index)=>{return(0,jsx_runtime_1.jsx)(ThirdContainerRow,{item:true,xs:12,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'row',alignItems:'center',children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:isMobile?12:5,container:true,direction:'row',children:[(0,jsx_runtime_1.jsx)(Blockie_1.Blockie,{address:holder.walletAddress,size:24}),(0,jsx_runtime_1.jsx)(AddressText,{variant:'subtitle2',color:'textSecondary',children:(0,utils_1.toShortAddress)(holder.walletAddress)}),(0,jsx_runtime_1.jsx)(CopyButton_1.CopyButton,{style:{fontSize:16},text:holder.walletAddress})]}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,xs:isMobile?12:7,children:(0,jsx_runtime_1.jsx)(AdminAddress,{variant:'subtitle2',style:isMobile?{marginTop:10}:{},color:'textSecondary',align:isMobile?'left':'right',children:(0,utils_2.numberWithCommas)(new bignumber_js_1.default(Number(holder.amount)))})})]})},'holder-'+index);}):null]})]})});};exports.ContractSummary=ContractSummary;