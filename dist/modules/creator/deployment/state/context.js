'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.DeploymentContext=exports.DeploymentProvider=exports.reducer=exports.INITIAL_STATE=exports.INITIAL_TOKEN_STATE=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=require('react');const useLocalStorage_1=__importDefault(require('../../../common/hooks/useLocalStorage'));const types_1=require('./types');const bignumber_js_1=__importDefault(require('bignumber.js'));const deploymentStatus={deploying:false,successful:false};const LOCAL_STORAGE_KEY='deploymentParams';exports.INITIAL_TOKEN_STATE={tokenSettings:{name:'',description:'',totalSupply:null,decimals:null,symbol:'',icon:''},tokenDistribution:{holders:[{walletAddress:'',amount:null}],totalAmount:new bignumber_js_1.default(0)}};exports.INITIAL_STATE={data:exports.INITIAL_TOKEN_STATE,deploymentStatus};const DeploymentContext=(0,react_1.createContext)({state:exports.INITIAL_STATE,dispatch:()=>null,updateCache:()=>null});exports.DeploymentContext=DeploymentContext;const reducer=(state,action)=>{switch(action.type){case types_1.ActionTypes.UPDATE_DEPLOYMENT_STATUS:const {contract,deploying}=action.status;state=Object.assign(Object.assign({},state),{deploymentStatus:{contract,deploying,successful:false}});return state;case types_1.ActionTypes.UPDATE_NAVIGATION_BAR:state=Object.assign(Object.assign({},state),{next:action.next,back:action.back});return state;case types_1.ActionTypes.UPDATE_TOKEN_SETTINGS:state=Object.assign(Object.assign({},state),{data:Object.assign(Object.assign({},state.data),{tokenSettings:action.contractInfo})});return state;case types_1.ActionTypes.UPDATE_TOKEN_DISTRIBUTION:state=Object.assign(Object.assign({},state),{data:Object.assign(Object.assign({},state.data),{tokenDistribution:action.distribution})});return state;case types_1.ActionTypes.CLEAR_CACHE:state=Object.assign(Object.assign({},exports.INITIAL_STATE),{deploymentStatus:Object.assign(Object.assign({},exports.INITIAL_STATE.deploymentStatus),{successful:true})});return state;}};exports.reducer=reducer;const DeploymentProvider=({children})=>{const [data,updateCache]=(0,useLocalStorage_1.default)(LOCAL_STORAGE_KEY,exports.INITIAL_STATE.data);const stateWithCache=Object.assign(Object.assign({},exports.INITIAL_STATE),{data});const [state,dispatch]=(0,react_1.useReducer)(exports.reducer,stateWithCache);const contextValue=(0,react_1.useMemo)(()=>{return{state,dispatch};},[state,dispatch]);return(0,jsx_runtime_1.jsx)(DeploymentContext.Provider,{value:Object.assign(Object.assign({},contextValue),{updateCache}),children:children});};exports.DeploymentProvider=DeploymentProvider;