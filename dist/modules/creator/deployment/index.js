'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.Deployment=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=require('react');const core_1=require('@material-ui/core');const Toolbar_1=require('../../common/Toolbar');const react_customizable_progressbar_1=__importDefault(require('react-customizable-progressbar'));const steps_1=require('./steps');const react_router_dom_1=require('react-router-dom');const NavigationBar_1=require('../components/NavigationBar');const context_1=require('./state/context');const PageContainer=(0,core_1.styled)(core_1.Grid)(({theme})=>({background:theme.palette.primary.main}));const PageContent=(0,core_1.styled)(core_1.Grid)(({theme})=>({marginTop:0,width:'1000px',height:'100%',margin:'auto',padding:'28px 0',flexDirection:'row',paddingTop:0,['@media (max-width:1167px)']:{width:'86vw'},[theme.breakpoints.down('sm')]:{marginTop:10}}));const IndicatorValue=(0,core_1.styled)(core_1.Paper)(({theme})=>({display:'flex',alignItems:'center',justifyContent:'center',textAlign:'center',position:'absolute',top:0,width:'100%',height:'100%',margin:'0 auto',fontSize:25,color:theme.palette.text.secondary,userSelect:'none',boxShadow:'none',background:'inherit',fontFamily:'Roboto Mono'}));const StepContentContainer=(0,core_1.styled)(core_1.Grid)({alignItems:'baseline',height:'100%',paddingTop:0,boxSizing:'border-box',overflowY:'auto',marginLeft:47,zIndex:10,width:'fit-content',['@media (max-width:1167px)']:{marginLeft:0}});const ProgressContainer=(0,core_1.styled)(core_1.Grid)(({theme})=>({background:'#2F3438',display:'grid',borderRadius:8,maxHeight:410,paddingTop:20,position:'sticky',top:125}));const StyledStepper=(0,core_1.styled)(core_1.Stepper)({'background':'inherit','paddingTop':48,'& .MuiStepLabel-label':{fontSize:14,lineHeight:14},'cursor':'pointer'});const Deployment=()=>{const creator=(0,react_1.useContext)(context_1.DeploymentContext);const {back,next}=creator.state;const theme=(0,core_1.useTheme)();const isMobile=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const history=(0,react_router_dom_1.useHistory)();const step=(0,steps_1.useDeploymentStepNumber)();const progress=(0,react_1.useMemo)(()=>step*50,[step]);return(0,jsx_runtime_1.jsxs)(PageContainer,{container:true,direction:'row',children:[(0,jsx_runtime_1.jsx)(Toolbar_1.Navbar,{mode:'creator'}),(0,jsx_runtime_1.jsxs)(PageContent,{container:true,direction:'row',children:[!isMobile&&(0,jsx_runtime_1.jsx)(ProgressContainer,{item:true,xs:3,container:true,direction:'column',children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'column',alignItems:'center',xs:true,children:[(0,jsx_runtime_1.jsx)(react_customizable_progressbar_1.default,{progress:progress,radius:52,strokeWidth:5,strokeColor:theme.palette.secondary.main,trackStrokeWidth:4,trackStrokeColor:'rgba(255, 255, 255, 0.2)',children:(0,jsx_runtime_1.jsx)(core_1.Box,{className:'indicator',children:(0,jsx_runtime_1.jsxs)(IndicatorValue,{children:[progress===0.5?0:step*50,'%']})})}),(0,jsx_runtime_1.jsx)(StyledStepper,{activeStep:step,orientation:'vertical',children:steps_1.STEPS.map(({title,path},index)=>(0,jsx_runtime_1.jsx)(core_1.Step,{children:(0,jsx_runtime_1.jsx)(core_1.StepLabel,{onClick:()=>index<step?history.push(path):null,icon:index+1,children:title})},title))})]})}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:12,md:9,container:true,justifyContent:'center',alignItems:'baseline',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,direction:'column',alignItems:'center',style:{width:'100%',marginBottom:20},children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,style:{width:'100%'},xs:true,children:(0,jsx_runtime_1.jsx)(StepContentContainer,{item:true,container:true,justifyContent:'center',children:(0,jsx_runtime_1.jsx)(steps_1.DeploymentStepRouter,{})})})}),step<3&&(0,jsx_runtime_1.jsx)(NavigationBar_1.NavigationBar,{back:back,next:next})]})]})]});};exports.Deployment=Deployment;