'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.DeploymentLoader=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const react_1=require('react');const SuspenseDots_1=require('./SuspenseDots');const WaitingText=(0,core_1.styled)(core_1.Typography)({marginTop:46,textAlign:'center',justifyContent:'center',marginBottom:20,maxWidth:650});const StyledContainer=(0,core_1.styled)(core_1.Box)({width:'100%',marginTop:'-15%',minWidth:650,['@media (max-width:1167px)']:{minWidth:'auto'}});const StyledStepper=(0,core_1.styled)(core_1.Stepper)(({theme})=>({'width':'100%','paddingLeft':0,'paddingRight':0,'background':'inherit','& .MuiStepConnector-alternativeLabel':{'left':'calc(-50% + 19px)','right':'calc(50% + 19px)','top':16,'& .MuiStepConnector-lineHorizontal':{borderColor:theme.palette.primary.light,borderTopWidth:3}}}));const StyledLabel=(0,core_1.styled)(core_1.StepLabel)(({theme,focused,hasError})=>({'& .MuiStepIcon-root':{borderWidth:3},'& .MuiStepIcon-active':{borderColor:hasError?theme.palette.error.main:focused?'#fff':theme.palette.primary.light,fill:'none'},'& .MuiStepIcon-text':{fill:'none'},'& .MuiStepIcon-completed':{borderColor:focused?'#fff':theme.palette.secondary.main,fill:theme.palette.secondary.main}}));const ColorlibConnector=(0,core_1.withStyles)(theme=>({alternativeLabel:{top:22},active:{'& $line':{backgroundColor:theme.palette.secondary.main}},completed:{'& $line':{backgroundColor:theme.palette.secondary.main}},line:{height:3,border:0,backgroundColor:theme.palette.primary.light,borderRadius:1}}))(core_1.StepConnector);const DeploymentLoader=({states,activeStep,error})=>{const errorMessage='Something went wrong, please try again later.';const [focusedState,setFocusedState]=(0,react_1.useState)(0);const isFinished=activeStep===states.length;const isStarted=Number.isInteger(activeStep);const showActiveText=isStarted&&!isFinished&&activeStep===focusedState;const showCompletedText=isStarted&&focusedState<activeStep;(0,react_1.useEffect)(()=>{if(activeStep){if(isFinished){setFocusedState(states.length-1);}else{setFocusedState(activeStep);}}},[activeStep,isFinished,states.length]);return(0,jsx_runtime_1.jsxs)(StyledContainer,{children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,justifyContent:'center',children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(WaitingText,{variant:'subtitle1',color:'textSecondary',children:[showActiveText?error?errorMessage:states[focusedState].activeText:showCompletedText?states[focusedState].completedText:'',showActiveText&&!error&&(0,jsx_runtime_1.jsx)(SuspenseDots_1.SuspenseDots,{})]})})}),(0,jsx_runtime_1.jsx)(StyledStepper,{activeStep:activeStep,alternativeLabel:true,nonLinear:true,connector:(0,jsx_runtime_1.jsx)(ColorlibConnector,{}),children:states.map((_,index)=>(0,jsx_runtime_1.jsx)(core_1.Step,{onClick:()=>{if(!activeStep){return;}if(index<=activeStep){setFocusedState(index);}},completed:activeStep?index<activeStep:false,children:(0,jsx_runtime_1.jsx)(StyledLabel,{hasError:activeStep===index&&!!error,focused:index===focusedState})},index))})]});};exports.DeploymentLoader=DeploymentLoader;