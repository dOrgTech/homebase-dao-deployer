'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.Review=exports.Governance=exports.DaoSettings=exports.Template=exports.Summary=exports.useStepNumber=exports.StepRouter=exports.STEPS=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=require('react');const react_router_1=require('react-router');const react_router_dom_1=require('react-router-dom');const steps_1=require('../steps');const ProtectedRoute_1=require('../components/ProtectedRoute');const Quorum_1=require('./Quorum');const mixpanel_browser_1=__importDefault(require('mixpanel-browser'));const Template_1=require('./Template');exports.STEPS=[{title:'Select template',index:0,path:'template'},{title:'Configure DAO settings',index:1,path:'dao'},{title:'Configure Proposal & Voting',index:2,path:'voting'},{title:'Adjust Quorum',index:3,path:'quorum'},{title:'Review information',index:4,path:'summary'}];const urlToStepMap={template:0,dao:1,voting:2,quorum:3,summary:4,review:5};const AnalyticsWrappedStep=({name,index,children})=>{(0,react_1.useEffect)(()=>{mixpanel_browser_1.default.track('Visited Creator Step',{stepName:name,stepIndex:index});},[index,name]);return(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:children});};const StepRouter=()=>{const match=(0,react_router_dom_1.useRouteMatch)();return(0,jsx_runtime_1.jsx)(ProtectedRoute_1.ProtectedRoute,{children:(0,jsx_runtime_1.jsxs)(react_router_1.Switch,{children:[(0,jsx_runtime_1.jsx)(react_router_1.Route,{path:`${match.url}/template`,children:(0,jsx_runtime_1.jsx)(AnalyticsWrappedStep,{name:'Select Template',index:0,children:(0,jsx_runtime_1.jsx)(Template_1.Template,{})})}),(0,jsx_runtime_1.jsx)(react_router_1.Route,{path:`${match.url}/dao`,children:(0,jsx_runtime_1.jsx)(AnalyticsWrappedStep,{name:'DAO Settings',index:1,children:(0,jsx_runtime_1.jsx)(steps_1.DaoSettings,{})})}),(0,jsx_runtime_1.jsx)(react_router_1.Route,{path:`${match.url}/voting`,children:(0,jsx_runtime_1.jsx)(AnalyticsWrappedStep,{name:'Governance',index:2,children:(0,jsx_runtime_1.jsx)(steps_1.Governance,{})})}),(0,jsx_runtime_1.jsx)(react_router_1.Route,{path:`${match.url}/quorum`,children:(0,jsx_runtime_1.jsx)(AnalyticsWrappedStep,{name:'Quorum',index:3,children:(0,jsx_runtime_1.jsx)(Quorum_1.Quorum,{})})}),(0,jsx_runtime_1.jsx)(react_router_1.Route,{path:`${match.url}/summary`,children:(0,jsx_runtime_1.jsx)(AnalyticsWrappedStep,{name:'Summary',index:4,children:(0,jsx_runtime_1.jsx)(steps_1.Summary,{})})}),(0,jsx_runtime_1.jsx)(react_router_1.Route,{path:`${match.url}/review`,children:(0,jsx_runtime_1.jsx)(AnalyticsWrappedStep,{name:'Deployment',index:5,children:(0,jsx_runtime_1.jsx)(steps_1.Review,{})})}),(0,jsx_runtime_1.jsx)(react_router_dom_1.Redirect,{to:`${match.url}/template`})]})});};exports.StepRouter=StepRouter;const useStepNumber=()=>{const {pathname}=(0,react_router_1.useLocation)();return(0,react_1.useMemo)(()=>{const extracted=pathname.endsWith('/')?pathname.split('/').slice(-2)[0]:pathname.split('/').slice(-1)[0];return urlToStepMap[extracted];},[pathname]);};exports.useStepNumber=useStepNumber;var Summary_1=require('./Summary');Object.defineProperty(exports,'Summary',{enumerable:true,get:function(){return Summary_1.Summary;}});var Template_2=require('./Template');Object.defineProperty(exports,'Template',{enumerable:true,get:function(){return Template_2.Template;}});var DaoSettings_1=require('./DaoSettings');Object.defineProperty(exports,'DaoSettings',{enumerable:true,get:function(){return DaoSettings_1.DaoSettings;}});var Governance_1=require('./Governance');Object.defineProperty(exports,'Governance',{enumerable:true,get:function(){return Governance_1.Governance;}});var Review_1=require('./Review');Object.defineProperty(exports,'Review',{enumerable:true,get:function(){return Review_1.Review;}});