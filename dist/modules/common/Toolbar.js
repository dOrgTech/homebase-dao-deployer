'use strict';var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||('get'in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k];}};}Object.defineProperty(o,k2,desc);}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,'default',{enumerable:true,value:v});}:function(o,v){o['default']=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=='default'&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.Navbar=exports.ConnectWalletButton=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=__importStar(require('react'));const core_1=require('@material-ui/core');const react_router_dom_1=require('react-router-dom');const homebase_logo_svg_1=__importDefault(require('../../assets/logos/homebase_logo.svg'));const useTezos_1=require('../../services/beacon/hooks/useTezos');const utils_1=require('../../services/contracts/utils');const icons_1=require('@material-ui/icons');const UserProfileName_1=require('../explorer/components/UserProfileName');const ProfileAvatar_1=require('../explorer/components/styled/ProfileAvatar');const SmallButton_1=require('./SmallButton');const ChangeNetworkButton_1=require('./ChangeNetworkButton');const icons_2=require('@material-ui/icons');const AddressMenu=(0,core_1.styled)(core_1.Box)(()=>({width:264,borderRadius:4,backgroundColor:'#282B31'}));const AddressMenuItem=(0,core_1.styled)(core_1.Grid)(({theme})=>({cursor:'pointer',boxSizing:'border-box',color:theme.palette.text.secondary,padding:'15px 10px'}));const AddressMenuIcon=(0,core_1.styled)(core_1.Grid)({paddingRight:'12px',marginBottom:'-4px'});const StyledUserProfileName=(0,core_1.styled)(core_1.Typography)({color:'#ddd'});const StyledPopover=(0,core_1.styled)(core_1.Popover)({'.MuiPaper-root':{borderRadius:4}});const Header=(0,core_1.styled)(core_1.Grid)(({theme})=>({width:'1000px',height:'100%',margin:'auto',padding:'28px 0',flexDirection:'row',['@media (max-width: 1425px)']:{},['@media (max-width:1335px)']:{},['@media (max-width:1167px)']:{width:'86vw'},['@media (max-width:1030px)']:{},['@media (max-width:960px)']:{},['@media (max-width:645px)']:{flexDirection:'column'}}));const StyledAppBar=(0,core_1.styled)(core_1.AppBar)(({theme})=>({boxShadow:'none',background:theme.palette.primary.main,position:'sticky',['@media (max-height:750px)']:{position:'sticky'}}));const StyledToolbar=(0,core_1.styled)(core_1.Toolbar)({width:'100%',padding:0,boxSizing:'border-box',justifyContent:'space-between',flexWrap:'wrap'});const AddressContainer=(0,core_1.styled)(core_1.Grid)({cursor:'pointer'});const LogoText=(0,core_1.styled)(core_1.Typography)({fontWeight:'bold',fontSize:'24px',cursor:'pointer',fontFamily:'Roboto',letterSpacing:'initial'});const AddressBarWrapper=(0,core_1.styled)(core_1.Grid)({'boxSizing':'border-box','padding':'8px 16px','borderRadius':4,'&:hover':{background:'rgba(129, 254, 183, 0.03)'}});const LogoItem=(0,core_1.styled)('img')({height:'30px',cursor:'pointer',paddingTop:8});const ToolbarContainer=(0,core_1.styled)(core_1.Grid)(({theme})=>({['@media (max-width: 645px)']:{marginBottom:'20px'}}));const BackButtonContainer=(0,core_1.styled)(core_1.Grid)({marginTop:28,alignItems:'baseline'});const BackButton=(0,core_1.styled)(core_1.Typography)(({theme})=>({color:theme.palette.secondary.light,fontSize:18}));const BackButtonIcon=(0,core_1.styled)(icons_2.ArrowBackIos)(({theme})=>({color:theme.palette.secondary.light,fontSize:12,marginRight:15}));const BackButtonText=(0,core_1.styled)(core_1.Grid)({cursor:'pointer',alignItems:'baseline'});const ConnectWalletButton=({connect})=>(0,jsx_runtime_1.jsx)(SmallButton_1.SmallButton,{variant:'outlined',onClick:()=>connect(),children:'Connect Wallet'});exports.ConnectWalletButton=ConnectWalletButton;const Navbar=({mode,children,disableMobileMenu})=>{const {connect,account,reset,changeNetwork,network}=(0,useTezos_1.useTezos)();const [anchorEl,setAnchorEl]=react_1.default.useState(null);const [popperOpen,setPopperOpen]=(0,react_1.useState)(false);const theme=(0,core_1.useTheme)();const isMobileExtraSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down('xs'));const isMobileSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const [networkAnchorEl,setNetworkAnchorEl]=react_1.default.useState(null);const [networkPopperOpen,setNetworkPopperOpen]=(0,react_1.useState)(false);const handleNetworkClick=event=>{setNetworkAnchorEl(event.currentTarget);setNetworkPopperOpen(!networkPopperOpen);};const handleNetworkChange=network=>{changeNetwork(network);setPopperOpen(!popperOpen);setNetworkPopperOpen(!networkPopperOpen);history.push('/explorer');};const handleClick=event=>{setAnchorEl(event.currentTarget);setPopperOpen(!popperOpen);};const handleLogout=()=>{reset();setPopperOpen(false);};const handleCopy=address=>{navigator.clipboard.writeText(address);setPopperOpen(false);};const history=(0,react_router_dom_1.useHistory)();return(0,jsx_runtime_1.jsx)(StyledAppBar,{children:(0,jsx_runtime_1.jsx)(StyledToolbar,{children:(0,jsx_runtime_1.jsxs)(Header,{container:true,alignItems:'center',wrap:'wrap',justifyContent:'space-between',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Box,{onClick:()=>location.href=`/explorer`,children:(0,jsx_runtime_1.jsxs)(ToolbarContainer,{container:true,alignItems:'center',wrap:'nowrap',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(LogoItem,{src:homebase_logo_svg_1.default})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Box,{paddingLeft:'10px',children:(0,jsx_runtime_1.jsx)(LogoText,{color:'textSecondary',children:'Homebase'})})})]})})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,justifyContent:isMobileExtraSmall?'center':'flex-end',children:account?(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,alignItems:'center',style:{gap:12},justifyContent:isMobileExtraSmall?'center':'flex-end',children:[children,(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,alignItems:'center',style:{gap:8},children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(ChangeNetworkButton_1.ChangeNetworkButton,{})}),(0,jsx_runtime_1.jsx)(AddressBarWrapper,{item:true,onClick:handleClick,children:(0,jsx_runtime_1.jsxs)(AddressContainer,{container:true,alignItems:'center',wrap:'nowrap',justifyContent:'flex-end',style:{gap:8},children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(ProfileAvatar_1.ProfileAvatar,{size:22,address:account})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(StyledUserProfileName,{children:(0,jsx_runtime_1.jsx)(UserProfileName_1.UserProfileName,{address:account,short:true})})})]})})]})}),(0,jsx_runtime_1.jsx)(StyledPopover,{id:'wallet-Popper',open:popperOpen,anchorEl:anchorEl,style:{zIndex:1500,borderRadius:4},onClose:()=>{setPopperOpen(false);},PaperProps:{style:{borderRadius:4,backgroundColor:'transparent'}},children:(0,jsx_runtime_1.jsxs)(AddressMenu,{children:[(0,jsx_runtime_1.jsxs)(AddressMenuItem,{container:true,alignItems:'center',onClick:()=>handleCopy(account),children:[(0,jsx_runtime_1.jsx)(AddressMenuIcon,{item:true,children:(0,jsx_runtime_1.jsx)(icons_1.FileCopyOutlined,{color:'inherit',fontSize:'inherit'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'subtitle2',color:'textSecondary',children:(0,utils_1.toShortAddress)(account)})})]}),(0,jsx_runtime_1.jsx)(AddressMenuItem,{container:true,alignItems:'center',onClick:handleNetworkClick,children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Typography,{variant:'subtitle2',color:'textSecondary',children:['Change network (',network,')']})})}),(0,jsx_runtime_1.jsxs)(AddressMenuItem,{style:{borderTop:'2px solid rgba(255, 255, 255, 0.2)'},container:true,alignItems:'center',onClick:handleLogout,children:[(0,jsx_runtime_1.jsx)(AddressMenuIcon,{item:true,children:(0,jsx_runtime_1.jsx)(icons_1.ExitToAppOutlined,{color:'inherit',fontSize:'inherit'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'subtitle2',color:'textSecondary',children:'Log out'})})]})]})})]}):(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,justifyContent:'flex-end',alignItems:'center',wrap:'nowrap',style:{gap:8},children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(ChangeNetworkButton_1.ChangeNetworkButton,{})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(SmallButton_1.SmallButton,{color:'secondary',variant:'contained',style:{fontSize:'14px'},onClick:()=>connect(),children:'Connect Wallet'})})]})})}),(0,jsx_runtime_1.jsx)(BackButtonContainer,{container:true,justifyContent:'flex-start',children:mode!=='creator'?(0,jsx_runtime_1.jsxs)(BackButtonText,{container:true,item:true,xs:6,md:2,onClick:()=>location.href=`/explorer`,children:[(0,jsx_runtime_1.jsx)(BackButtonIcon,{}),(0,jsx_runtime_1.jsx)(BackButton,{children:'Back'})]}):null})]})})});};exports.Navbar=Navbar;