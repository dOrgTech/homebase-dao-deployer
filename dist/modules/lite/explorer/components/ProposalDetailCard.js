'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.ProposalDetailCard=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=__importDefault(require('react'));const core_1=require('@material-ui/core');const GridContainer_1=require('../../../common/GridContainer');const ProposalTableRowStatusBadge_1=require('./ProposalTableRowStatusBadge');const CreatorBadge_1=require('./CreatorBadge');const icons_1=require('@material-ui/icons');const share_svg_1=__importDefault(require('../../../../assets/img/share.svg'));const CommunityBadge_1=require('./CommunityBadge');const link_svg_1=__importDefault(require('../../../../assets/img/link.svg'));const dayjs_1=__importDefault(require('dayjs'));const useNotification_1=require('../../../common/hooks/useNotification');const LogoItem=(0,core_1.styled)('img')({height:18,cursor:'pointer'});const TextContainer=(0,core_1.styled)(core_1.Typography)({display:'flex',alignItems:'center',gap:10,marginRight:8});const EndTextContainer=(0,core_1.styled)(core_1.Typography)(({theme})=>({display:'flex',alignItems:'center',gap:10,marginRight:8,[theme.breakpoints.down('sm')]:{marginTop:20}}));const EndText=(0,core_1.styled)(core_1.Typography)(({theme})=>({[theme.breakpoints.down('sm')]:{marginTop:20}}));const Divider=(0,core_1.styled)(core_1.Typography)(({theme})=>({marginLeft:8,marginRight:8,[theme.breakpoints.down('sm')]:{marginTop:20}}));const StyledLink=(0,core_1.styled)(core_1.Link)({fontFamily:'Roboto Mono',fontWeight:300,fontSize:16,marginLeft:8});const CopyIcon=(0,core_1.styled)(icons_1.FileCopyOutlined)({marginRight:8,cursor:'pointer'});const CustomPopover=(0,core_1.withStyles)({paper:{'marginTop':10,'padding':8,'cursor':'pointer','&:hover':{background:'#81feb76b !important'}}})(core_1.Popover);const ProposalDetailCard=({poll,daoId})=>{const theme=(0,core_1.useTheme)();const isMobileSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const [anchorEl,setAnchorEl]=react_1.default.useState(null);const openNotification=(0,useNotification_1.useNotification)();const handleClick=event=>{setAnchorEl(anchorEl?null:event.currentTarget);};const handleClose=()=>{setAnchorEl(null);};const open=Boolean(anchorEl);const id=open?'simple-popper':undefined;const handleCopy=()=>{const url=location.href;navigator.clipboard.writeText(url);openNotification({message:'Proposal link copied to clipboard!',autoHideDuration:3000,variant:'success'});handleClose();};return(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:poll&&poll!==undefined?(0,jsx_runtime_1.jsx)(GridContainer_1.GridContainer,{container:true,style:{gap:50},children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,style:{gap:25},children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,alignItems:'flex-end',direction:'row',style:{gap:isMobileSmall?25:0},justifyContent:'space-between',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'h1',color:'textPrimary',children:poll===null||poll===void 0?void 0:poll.name})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,style:{gap:18},direction:'row',children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,style:{gap:12,cursor:'pointer'},alignItems:'center','aria-describedby':id,onClick:handleClick,children:[(0,jsx_runtime_1.jsx)(LogoItem,{src:share_svg_1.default}),(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'secondary',variant:'body2',children:'Share'})]}),(0,jsx_runtime_1.jsx)(CustomPopover,{id:id,open:open,anchorEl:anchorEl,onClose:handleClose,anchorOrigin:{vertical:'bottom',horizontal:'left'},children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'row',onClick:handleCopy,children:[(0,jsx_runtime_1.jsx)(CopyIcon,{}),(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'subtitle2',children:'Copy link'})]})})]})})})]}),(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,justifyContent:'space-between',alignItems:'center',children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,justifyContent:isMobileSmall?'space-evenly':'flex-start',style:{gap:23},children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(ProposalTableRowStatusBadge_1.TableStatusBadge,{status:(poll===null||poll===void 0?void 0:poll.isActive)||ProposalTableRowStatusBadge_1.ProposalStatus.ACTIVE})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(CommunityBadge_1.CommunityBadge,{id:daoId})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(CreatorBadge_1.CreatorBadge,{address:poll===null||poll===void 0?void 0:poll.author})})]})})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,direction:'row',children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,container:true,direction:'row',spacing:2,alignItems:'center',children:[(0,jsx_runtime_1.jsxs)(TextContainer,{color:'textPrimary',variant:'body1',children:['Start date:',' ']}),(0,jsx_runtime_1.jsxs)(EndText,{variant:'body2',color:'textPrimary',children:[' ',(0,dayjs_1.default)(Number(poll===null||poll===void 0?void 0:poll.startTime)).format('lll')]}),(0,jsx_runtime_1.jsx)(Divider,{color:'textPrimary',children:'-'}),(0,jsx_runtime_1.jsxs)(EndTextContainer,{color:'textPrimary',variant:'body1',children:[' ','End date:',' ']}),(0,jsx_runtime_1.jsxs)(EndText,{variant:'body2',color:'textPrimary',children:[' ',(0,dayjs_1.default)(Number(poll===null||poll===void 0?void 0:poll.endTime)).format('lll')]})]})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'body2',color:'textPrimary',children:poll===null||poll===void 0?void 0:poll.description})}),(poll===null||poll===void 0?void 0:poll.externalLink)?(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,alignItems:'center',children:[(0,jsx_runtime_1.jsx)(LogoItem,{src:link_svg_1.default}),(0,jsx_runtime_1.jsx)(StyledLink,{color:'secondary',href:'#',children:poll===null||poll===void 0?void 0:poll.externalLink})]}):null]})}):(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,direction:'row',children:(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'textPrimary',children:'Could not load the requested proposal'})})});};exports.ProposalDetailCard=ProposalDetailCard;