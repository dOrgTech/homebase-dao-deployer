'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.NavigationMenu=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const home_svg_1=require('../../../assets/logos/home.svg');const voting_svg_1=require('../../../assets/logos/voting.svg');const treasury_svg_1=require('../../../assets/logos/treasury.svg');const list_svg_1=require('../../../assets/logos/list.svg');const user_svg_1=require('../../../assets/logos/user.svg');const react_1=require('react');const router_1=require('../pages/DAO/router');const useDAO_1=require('../../../services/services/dao/hooks/useDAO');const useTezos_1=require('../../../services/beacon/hooks/useTezos');const react_router_1=require('react-router');const react_router_dom_1=require('react-router-dom');const debounce_1=require('../utils/debounce');const Container=(0,core_1.styled)(core_1.Grid)(({theme})=>({width:'100%',background:theme.palette.primary.main,position:'sticky',top:'0px'}));const InnerContainer=(0,core_1.styled)(core_1.Grid)(({theme})=>({width:'1000px',margin:'auto',justifyContent:'space-between',['@media (max-width:1167px)']:{width:'86vw'}}));const PageItem=(0,core_1.styled)(core_1.Grid)(({theme,isSelected})=>({'height':'60px','display':'flex','alignItems':'center','padding':'0 8px','borderTop':'2px solid transparent','borderBottom':isSelected?'2px solid'+theme.palette.secondary.main:'2px solid transparent','transition':isSelected?'0s ease-in':'.1s ease-out','& > a > *':{height:'100%'},'&:hover':{'& > a > * > * > * > * > *':{fill:isSelected?theme.palette.secondary.main:theme.palette.secondary.main,stroke:isSelected?theme.palette.secondary.main:theme.palette.secondary.main,transition:isSelected?'none':'.15s ease-in'}},'& > a > * > * > * > * > *':{transition:'.15s ease-out'},'& > a > * > * > *':{transition:'.15s ease-out'},[theme.breakpoints.down('sm')]:{width:'45px'}}));const PageItemBg=(0,core_1.styled)(core_1.Grid)(({theme,isSelected})=>({alignItems:'center',justifyContent:'center',gap:15}));const IconContainer=(0,core_1.styled)('span')(({theme,isSelected})=>({'height':'25px','display':'flex','justifyContent':'center','& > svg > *':{fill:isSelected?theme.palette.secondary.main:theme.palette.text.primary,stroke:isSelected?theme.palette.secondary.main:theme.palette.text.primary}}));const NavText=(0,core_1.styled)(core_1.Typography)(({theme,isSelected})=>({'display':'flex','justifyContent':'center','color':isSelected?theme.palette.secondary.main:theme.palette.text.primary,'&:hover':{color:`${theme.palette.secondary.main} !important`}}));const getPages=daoId=>[{pathId:'overview',name:'Home',icon:home_svg_1.ReactComponent,href:`/explorer/dao/${daoId}`},{pathId:'proposals',name:'Proposals',icon:voting_svg_1.ReactComponent,href:`/explorer/dao/${daoId}/proposals`},{pathId:'treasury',name:'Treasury',icon:treasury_svg_1.ReactComponent,href:`/explorer/dao/${daoId}/treasury`},{pathId:'registry',name:'Registry',icon:list_svg_1.ReactComponent,href:`/explorer/dao/${daoId}/registry`},{pathId:'user',name:'User',icon:user_svg_1.ReactComponent,href:`/explorer/dao/${daoId}/user`}];const StyledBottomBar=(0,core_1.styled)(core_1.Grid)(({theme})=>({position:'fixed',height:55,width:'100%',bottom:0,backgroundColor:theme.palette.primary.main,boxShadow:'0px -4px 7px -4px rgba(0,0,0,0.2)',zIndex:10000,transition:'bottom 0.5s'}));const BottomBarItems=(0,core_1.styled)(core_1.Grid)({width:'86vw',margin:'0 auto',justifyContent:'space-between'});const BottomNavBar=({children})=>{const [prevScrollPos,setPrevScrollPos]=(0,react_1.useState)(0);const [visible,setVisible]=(0,react_1.useState)(true);(0,react_1.useEffect)(()=>{const handleScroll=(0,debounce_1.debounce)(()=>{const currentScrollPos=23;setVisible(prevScrollPos>currentScrollPos||currentScrollPos<10);setPrevScrollPos(currentScrollPos);},100);},[prevScrollPos,visible]);return(0,jsx_runtime_1.jsx)(StyledBottomBar,{container:true,direction:'row',children:(0,jsx_runtime_1.jsx)(BottomBarItems,{container:true,children:children})});};const NavigationMenu=({disableMobileMenu})=>{const [pages,setPages]=(0,react_1.useState)([]);const {account}=(0,useTezos_1.useTezos)();const daoId=(0,router_1.useDAOID)();const {data:dao}=(0,useDAO_1.useDAO)(daoId);const path=(0,react_router_1.useLocation)();const pathId=path.pathname.split('/').slice(-1)[0];const theme=(0,core_1.useTheme)();const isMobileSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down(960));(0,react_1.useEffect)(()=>{if(dao){const disabledPages=[];if(!account){disabledPages.push('User');}setPages(getPages(daoId).filter(page=>!disabledPages.includes(page.name)));}},[account,dao,daoId]);return!isMobileSmall||disableMobileMenu?(0,jsx_runtime_1.jsx)(Container,{container:true,children:(0,jsx_runtime_1.jsx)(InnerContainer,{container:true,children:pages.map((page,i)=>(0,jsx_runtime_1.jsx)(PageItem,{isSelected:pathId===page.pathId,item:true,children:(0,jsx_runtime_1.jsx)(react_router_dom_1.Link,{to:page.href,children:(0,jsx_runtime_1.jsxs)(PageItemBg,{isSelected:pathId===page.pathId,container:true,children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(IconContainer,{isSelected:pathId===page.pathId,children:(0,jsx_runtime_1.jsx)(page.icon,{})})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(NavText,{isSelected:pathId===page.pathId,children:page.name})})]})})},`page-${i}`))})}):(0,jsx_runtime_1.jsx)(BottomNavBar,{children:pages.map((page,i)=>(0,jsx_runtime_1.jsx)(PageItem,{isSelected:pathId===page.pathId,container:true,item:true,alignItems:'center',children:(0,jsx_runtime_1.jsx)(react_router_dom_1.Link,{to:page.href,children:(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,alignItems:'center',justifyContent:'center',children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(IconContainer,{isSelected:pathId===page.pathId,children:(0,jsx_runtime_1.jsx)(page.icon,{})})})})})},`page-${i}`))});};exports.NavigationMenu=NavigationMenu;