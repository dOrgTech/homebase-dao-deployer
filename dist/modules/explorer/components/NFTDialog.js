'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.NFTDialog=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const hex_to_rgba_1=__importDefault(require('hex-to-rgba'));const react_1=require('react');const NFT_1=require('./NFT');const UserBadge_1=require('./UserBadge');const ProposalForm_1=require('./ProposalForm');const useTezos_1=require('../../../services/beacon/hooks/useTezos');const ResponsiveDialog_1=require('./ResponsiveDialog');const useCycleInfo_1=require('../../../services/contracts/baseDAO/hooks/useCycleInfo');const InfoIcon_1=require('./styled/InfoIcon');const router_1=require('../pages/DAO/router');const CustomDialog=(0,core_1.styled)(ResponsiveDialog_1.ResponsiveDialog)({'& .MuiPaper-root':{width:1010,height:822,maxWidth:'100%',maxHeight:'100%'}});const TitleText=(0,core_1.styled)(core_1.Typography)({fontSize:26,fontWeight:500,marginBottom:12});const SubtitleText=(0,core_1.styled)(core_1.Typography)({fontSize:18,fontWeight:500,marginBottom:12});const Tag=(0,core_1.styled)(core_1.Grid)(({theme})=>({boxSizing:'border-box',padding:6,background:(0,hex_to_rgba_1.default)(theme.palette.secondary.main,0.15),borderRadius:4}));const NFTContainer=(0,core_1.styled)(core_1.Grid)({maxWidth:458,maxHeight:415});const NFTDialog=({nft,onClose,open})=>{const [openTransfer,setOpenTransfer]=(0,react_1.useState)(false);const {account}=(0,useTezos_1.useTezos)();const [defaultValues,setDefaultValues]=(0,react_1.useState)();const onOpenTransferModal=nft=>{setDefaultValues({nftTransferForm:{transfers:[{recipient:account,amount:1,asset:nft}]}});setOpenTransfer(true);};const onClick=(e,nft)=>{e.stopPropagation();onOpenTransferModal(nft);};const onCloseTransfer=()=>{setOpenTransfer(false);};const daoId=(0,router_1.useDAOID)();const shouldDisable=(0,useCycleInfo_1.useIsProposalButtonDisabled)(daoId);return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsx)(CustomDialog,{onClose:onClose,open:open,children:nft&&(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',style:{gap:32},children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,justifyContent:'space-between',style:{gap:32},children:[(0,jsx_runtime_1.jsx)(NFTContainer,{item:true,children:(0,jsx_runtime_1.jsx)(NFT_1.NFT,{qmHash:nft.artifact_hash,name:nft.name,mediaType:nft.mediaType})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',style:{gap:26},children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(TitleText,{color:'textPrimary',children:nft.name}),(0,jsx_runtime_1.jsxs)(core_1.Typography,{color:'textPrimary',variant:'body1',children:[nft.symbol,'#',nft.token_id,' \u2022 ',nft.preferredFormat]})]}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'textPrimary',variant:'body1',children:nft.description})}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(core_1.Button,{variant:'contained',color:'secondary',onClick:e=>onClick(e,nft),disabled:shouldDisable,children:'PROPOSE TRANSFER'}),shouldDisable&&(0,jsx_runtime_1.jsx)(core_1.Tooltip,{placement:'bottom',title:'Not on proposal creation period',children:(0,jsx_runtime_1.jsx)(InfoIcon_1.InfoIcon,{color:'secondary'})})]})]})})]})}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(SubtitleText,{color:'textPrimary',variant:'body1',children:'Creators'}),nft.creators.length?nft.creators.map((creator,i)=>(0,jsx_runtime_1.jsx)(UserBadge_1.UserBadge,{address:creator,size:35},`creator-${i}`)):(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'textPrimary',variant:'body1',children:'Unknown'})]}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(SubtitleText,{color:'textPrimary',variant:'body1',children:'Tags'}),(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,style:{gap:12},children:nft.tags.map((tag,i)=>(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(Tag,{color:'secondary',children:(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'secondary',children:tag.toUpperCase()})})},`tag-${i}`))})]})]})})}),(0,jsx_runtime_1.jsx)(ProposalForm_1.ProposalFormContainer,{open:openTransfer,handleClose:onCloseTransfer,defaultValues:defaultValues,defaultTab:1})]});};exports.NFTDialog=NFTDialog;