'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.AllProposalsList=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const User_1=require('../pages/User');const react_1=require('react');const react_router_dom_1=require('react-router-dom');const ContentContainer_1=require('./ContentContainer');const ProposalsFilter_1=require('./ProposalsFilter');const TableContainer=(0,core_1.styled)(ContentContainer_1.ContentContainer)({width:'100%'});const TableHeader=(0,core_1.styled)(core_1.Grid)(({theme})=>({padding:'16px 46px',minHeight:34,[theme.breakpoints.down('sm')]:{gap:10}}));const ProposalsFooter=(0,core_1.styled)(core_1.Grid)({padding:'16px 46px',borderTop:'.6px solid rgba(125,140,139, 0.2)',minHeight:34});const AllProposalsList=({currentLevel,proposals,title,showFooter,rightItem})=>{const [filteredProposal,setFilteredProposals]=(0,react_1.useState)(proposals);const [filter,setFilter]=(0,react_1.useState)('all');const filterProposals=(0,react_1.useCallback)(status=>{if(status==='all'){return setFilteredProposals(proposals);}else if(status!=='all'&&status!==undefined){const filtered=proposals.filter(proposal=>{var _a;return((_a=proposal['cachedStatus'])===null||_a===void 0?void 0:_a.status)===status;});setFilteredProposals(filtered);}else{return setFilteredProposals(proposals);}},[proposals]);(0,react_1.useEffect)(()=>{filterProposals(filter);},[filter,filterProposals]);(0,react_1.useEffect)(()=>{setFilteredProposals(proposals);},[]);const filterProposalByStatus=status=>{setFilter(status);};return(0,jsx_runtime_1.jsx)(TableContainer,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',wrap:'nowrap',children:[(0,jsx_runtime_1.jsxs)(TableHeader,{item:true,container:true,justifyContent:'space-between',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'body1',style:{fontWeight:'500'},color:'textPrimary',children:title})}),proposals.length?(0,jsx_runtime_1.jsx)(ProposalsFilter_1.ProposalFilter,{filterProposalByStatus:filterProposalByStatus}):null]}),filteredProposal.length?(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,container:true,wrap:'nowrap',component:core_1.Collapse,in:true,timeout:'auto',unmountOnExit:true,direction:'column',children:filteredProposal.map((p,i)=>(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(react_router_dom_1.Link,{to:`proposal/${p.id}`,children:(0,jsx_runtime_1.jsx)(User_1.ProposalItem,{proposal:p,status:p.getStatus(currentLevel).status,children:rightItem?rightItem(p):null})})},`proposal-${i}`))}):(0,jsx_runtime_1.jsx)(ProposalsFooter,{item:true,container:true,direction:'column',justifyContent:'center',children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'textPrimary',align:'center',children:'No items'})})}),showFooter&&(0,jsx_runtime_1.jsx)(ProposalsFooter,{item:true,container:true,direction:'column',justifyContent:'center',children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(react_router_dom_1.Link,{to:'proposals',children:(0,jsx_runtime_1.jsx)(core_1.Typography,{color:'secondary',variant:'body2',align:'center',children:'View All Proposals'})})})})]})});};exports.AllProposalsList=AllProposalsList;