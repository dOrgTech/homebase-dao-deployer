'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.GuardianChangeProposalForm=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const react_1=require('react');const useDAO_1=require('../../../services/services/dao/hooks/useDAO');const ProposalFormSendButton_1=require('./ProposalFormSendButton');const react_hook_form_1=require('react-hook-form');const router_1=require('../pages/DAO/router');const ProposalFormInput_1=require('./ProposalFormInput');const useProposeGuardianChange_1=require('../../../services/contracts/baseDAO/hooks/useProposeGuardianChange');const ResponsiveDialog_1=require('./ResponsiveDialog');const Content=(0,core_1.styled)(core_1.Grid)({});const GuardianChangeProposalForm=({open,handleClose,defaultValues})=>{const daoId=(0,router_1.useDAOID)();const {data:dao}=(0,useDAO_1.useDAO)(daoId);const methods=(0,react_hook_form_1.useForm)({defaultValues:(0,react_1.useMemo)(()=>Object.assign({newGuardianAddress:''},defaultValues),[defaultValues])});const newGuardianAddress=methods.watch('newGuardianAddress');(0,react_1.useEffect)(()=>{methods.reset(defaultValues);},[defaultValues,methods]);const {mutate}=(0,useProposeGuardianChange_1.useProposeGuardianChange)();const onSubmit=(0,react_1.useCallback)(values=>{if(dao){mutate({dao,newGuardianAddress:values.newGuardianAddress});handleClose();}},[dao,handleClose,mutate]);return(0,jsx_runtime_1.jsx)(react_hook_form_1.FormProvider,Object.assign({},methods,{children:(0,jsx_runtime_1.jsx)(ResponsiveDialog_1.ResponsiveDialog,{open:open,onClose:handleClose,'aria-labelledby':'alert-dialog-title','aria-describedby':'alert-dialog-description',title:'Update Guardian',children:(0,jsx_runtime_1.jsxs)(Content,{container:true,direction:'column',style:{gap:18},children:[dao&&(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Typography,{color:'inherit',style:{marginBottom:'7px'},children:['Current Guardian:',' ',(0,jsx_runtime_1.jsx)('span',{style:{fontWeight:300,fontSize:'16px',marginLeft:'-5px'},children:dao.data.guardian})]})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(ProposalFormInput_1.ProposalFormInput,{label:'New Guardian Address',children:(0,jsx_runtime_1.jsx)(react_hook_form_1.Controller,{control:methods.control,name:`newGuardianAddress`,render:({field})=>(0,jsx_runtime_1.jsx)(core_1.TextField,Object.assign({},field,{type:'text',placeholder:' tz1...',InputProps:{disableUnderline:true}}))})})}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{align:'left',variant:'subtitle2',color:'textPrimary',display:'inline',children:['Proposal Fee:',' ']}),(0,jsx_runtime_1.jsxs)(core_1.Typography,{align:'left',variant:'subtitle2',color:'secondary',display:'inline',style:{fontWeight:300},children:[dao&&dao.data.extra.frozen_extra_value.toString(),' ',dao?dao.data.token.symbol:'']})]}),(0,jsx_runtime_1.jsx)(ProposalFormSendButton_1.SendButton,{onClick:methods.handleSubmit(onSubmit),disabled:!dao||!newGuardianAddress,children:'Submit'})]})})}));};exports.GuardianChangeProposalForm=GuardianChangeProposalForm;