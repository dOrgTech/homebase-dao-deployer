'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.DelegationChangeProposalForm=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const react_1=require('react');const useDAO_1=require('../../../services/services/dao/hooks/useDAO');const ProposalFormSendButton_1=require('./ProposalFormSendButton');const react_hook_form_1=require('react-hook-form');const router_1=require('../pages/DAO/router');const ProposalFormInput_1=require('./ProposalFormInput');const ResponsiveDialog_1=require('./ResponsiveDialog');const useProposeDelegationChange_1=require('../../../services/contracts/baseDAO/hooks/useProposeDelegationChange');const Content=(0,core_1.styled)(core_1.Grid)({padding:'10px 0'});const DelegationChangeProposalForm=({open,handleClose,defaultValues})=>{const daoId=(0,router_1.useDAOID)();const {data:dao}=(0,useDAO_1.useDAO)(daoId);const methods=(0,react_hook_form_1.useForm)({defaultValues:(0,react_1.useMemo)(()=>Object.assign({newDelegationAddress:''},defaultValues),[defaultValues])});const newDelegationAddress=methods.watch('newDelegationAddress');(0,react_1.useEffect)(()=>{methods.reset(defaultValues);},[defaultValues,methods]);const {mutate}=(0,useProposeDelegationChange_1.useProposeDelegationChange)();const onSubmit=(0,react_1.useCallback)(values=>{if(dao){mutate({dao,newDelegationAddress:values.newDelegationAddress});handleClose();}},[dao,handleClose,mutate]);return(0,jsx_runtime_1.jsx)(react_hook_form_1.FormProvider,Object.assign({},methods,{children:(0,jsx_runtime_1.jsx)(ResponsiveDialog_1.ResponsiveDialog,{open:open,onClose:handleClose,'aria-labelledby':'alert-dialog-title','aria-describedby':'alert-dialog-description',title:'Change Delegate',children:(0,jsx_runtime_1.jsxs)(Content,{container:true,direction:'column',style:{gap:18},children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(ProposalFormInput_1.ProposalFormInput,{label:'New Delegate Address',children:(0,jsx_runtime_1.jsx)(react_hook_form_1.Controller,{control:methods.control,name:`newDelegationAddress`,render:({field})=>(0,jsx_runtime_1.jsx)(core_1.TextField,Object.assign({},field,{type:'text',placeholder:' tz1...',InputProps:{disableUnderline:true}}))})})}),(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsxs)(core_1.Typography,{align:'left',variant:'subtitle2',color:'textPrimary',display:'inline',children:['Proposal Fee:',' ']}),(0,jsx_runtime_1.jsxs)(core_1.Typography,{align:'left',variant:'subtitle2',color:'secondary',display:'inline',children:[dao&&dao.data.extra.frozen_extra_value.toString(),' ',dao?dao.data.token.symbol:'']})]}),(0,jsx_runtime_1.jsx)(ProposalFormSendButton_1.SendButton,{onClick:methods.handleSubmit(onSubmit),disabled:!dao||!newDelegationAddress,children:'Submit'})]})})}));};exports.DelegationChangeProposalForm=DelegationChangeProposalForm;