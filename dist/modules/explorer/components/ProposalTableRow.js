'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.ProposalTableRow=void 0;const jsx_runtime_1=require('react/jsx-runtime');const react_1=require('react');const core_1=require('@material-ui/core');const dayjs_1=__importDefault(require('dayjs'));const ArrowForward_1=__importDefault(require('@material-ui/icons/ArrowForward'));const react_router_dom_1=require('react-router-dom');const RowContainer_1=require('./tables/RowContainer');const ProposalTableRowStatusBadge_1=require('./ProposalTableRowStatusBadge');const icons_1=require('@material-ui/icons');const utils_1=require('../../../services/contracts/utils');const types_1=require('../../../services/services/dao/mappers/proposal/types');const useTopic_1=require('../../../services/agora/hooks/useTopic');const useDAO_1=require('../../../services/services/dao/hooks/useDAO');const ArrowContainer=(0,core_1.styled)(core_1.Grid)(({theme})=>({display:'flex',[theme.breakpoints.down('sm')]:{display:'none'}}));const ArrowButton=(0,core_1.styled)(core_1.IconButton)(({theme})=>({color:theme.palette.primary.light}));const StatusText=(0,core_1.styled)(core_1.Typography)({textTransform:'uppercase',marginLeft:10,marginRight:30});const RowContent=(0,core_1.styled)(core_1.Box)(({theme})=>({marginTop:25,[theme.breakpoints.down('sm')]:{marginTop:15}}));const ArrowInfo=(0,core_1.styled)(core_1.Typography)(({theme})=>({[theme.breakpoints.down('sm')]:{marginTop:15}}));const ProposalTableRow=({proposal})=>{const history=(0,react_router_dom_1.useHistory)();const theme=(0,core_1.useTheme)();const isMobileSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const {cycleInfo}=(0,useDAO_1.useDAO)(proposal.dao.data.address);const formattedDate=(0,dayjs_1.default)(proposal.startDate).format('LLL');const {data:agoraPost}=(0,useTopic_1.useAgoraTopic)(Number(proposal.metadata.agoraPostId));const onClick=(0,react_1.useCallback)(()=>{history.push(`/explorer/dao/${proposal.dao.data.address}/proposal/${proposal.id}`);},[history,proposal.dao.data.address,proposal.id]);return(0,jsx_runtime_1.jsxs)(RowContainer_1.RowContainer,{item:true,container:true,alignItems:'center',onClick:onClick,children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,xs:12,md:9,children:[(0,jsx_runtime_1.jsx)(core_1.Box,{children:(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'h4',color:'textSecondary',align:isMobileSmall?'center':'left',children:agoraPost?agoraPost.title:`Proposal ${(0,utils_1.toShortAddress)(proposal.id)}`})}),(0,jsx_runtime_1.jsx)(RowContent,{children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:isMobileSmall?'column':'row',alignItems:isMobileSmall?'center':'flex-start',wrap:'nowrap',style:{gap:32},children:[cycleInfo&&(0,jsx_runtime_1.jsx)(ProposalTableRowStatusBadge_1.TableStatusBadge,{status:proposal.getStatus(cycleInfo.currentLevel).status}),(0,jsx_runtime_1.jsxs)(ArrowInfo,{color:'textSecondary',children:['Created ',formattedDate]})]})})]}),(0,jsx_runtime_1.jsxs)(ArrowContainer,{item:true,md:3,container:true,direction:'row',alignItems:'center',justifyContent:'flex-end',children:[(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[status===types_1.ProposalStatus.ACTIVE?(0,jsx_runtime_1.jsx)(icons_1.PlayCircleOutlineOutlined,{htmlColor:'#FFC839',fontSize:'large'}):null,status===types_1.ProposalStatus.PENDING?(0,jsx_runtime_1.jsx)(icons_1.PauseCircleOutline,{htmlColor:'rgba(56, 102, 249)',fontSize:'large'}):null,status===types_1.ProposalStatus.PASSED?(0,jsx_runtime_1.jsx)(icons_1.CheckCircleOutlined,{fontSize:'large',color:'secondary'}):null,status===types_1.ProposalStatus.NO_QUORUM?(0,jsx_runtime_1.jsx)(icons_1.RemoveCircleOutline,{fontSize:'large',htmlColor:'rgb(61, 61, 61)'}):null,status===types_1.ProposalStatus.EXECUTED?(0,jsx_runtime_1.jsx)(icons_1.CheckCircleOutlined,{fontSize:'large',color:'secondary'}):null,status===types_1.ProposalStatus.EXPIRED?(0,jsx_runtime_1.jsx)(icons_1.CancelOutlined,{fontSize:'large',htmlColor:'rgb(61, 61, 61)'}):null,status===types_1.ProposalStatus.REJECTED?(0,jsx_runtime_1.jsx)(icons_1.CancelOutlined,{fontSize:'large',color:'error'}):null,status===types_1.ProposalStatus.DROPPED?(0,jsx_runtime_1.jsx)(icons_1.CancelOutlined,{fontSize:'large',color:'error'}):null,(0,jsx_runtime_1.jsx)(StatusText,{color:'textSecondary',children:status})]}),(0,jsx_runtime_1.jsx)(ArrowButton,{children:(0,jsx_runtime_1.jsx)(ArrowForward_1.default,{fontSize:'large',color:'inherit'})})]})]});};exports.ProposalTableRow=ProposalTableRow;