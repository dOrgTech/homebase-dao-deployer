'use strict';var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||('get'in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k];}};}Object.defineProperty(o,k2,desc);}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,'default',{enumerable:true,value:v});}:function(o,v){o['default']=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=='default'&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};Object.defineProperty(exports,'__esModule',{value:true});exports.Treasury=void 0;const jsx_runtime_1=require('react/jsx-runtime');const core_1=require('@material-ui/core');const CopyAddress_1=require('../../../common/CopyAddress');const ProposalForm_1=require('../../components/ProposalForm');const react_1=__importStar(require('react'));const useDAO_1=require('../../../../services/services/dao/hooks/useDAO');const Hero_1=require('../../components/Hero');const HeroTitle_1=require('../../components/HeroTitle');const router_1=require('../DAO/router');const BalancesTable_1=require('./components/BalancesTable');const TransfersTable_1=require('./components/TransfersTable');const useTransfers_1=require('../../../../services/contracts/baseDAO/hooks/useTransfers');const InfoIcon_1=require('../../components/styled/InfoIcon');const useCycleInfo_1=require('../../../../services/contracts/baseDAO/hooks/useCycleInfo');const core_2=require('@material-ui/core');const MainButton_1=require('../../../common/MainButton');const TabPanel_1=require('../../components/TabPanel');const NFTs_1=require('../NFTs');const ItemGrid=(0,core_2.styled)(core_1.Grid)({width:'inherit'});const StyledTab=(0,core_2.styled)(core_1.Button)(({theme,isSelected})=>({'fontSize':16,'fontWeight':400,'color':isSelected?theme.palette.primary.dark:'#fff','backgroundColor':isSelected?theme.palette.secondary.main:theme.palette.primary.main,'&:hover':{backgroundColor:isSelected?theme.palette.secondary.main:theme.palette.secondary.dark}}));const Treasury=()=>{const theme=(0,core_1.useTheme)();const isMobileSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const daoId=(0,router_1.useDAOID)();const {data:dao}=(0,useDAO_1.useDAO)(daoId);const [openTransfer,setOpenTransfer]=(0,react_1.useState)(false);const [selectedTab,setSelectedTab]=react_1.default.useState(0);const onCloseTransfer=()=>{setOpenTransfer(false);};const {data:transfers}=(0,useTransfers_1.useTransfers)(daoId);const shouldDisable=(0,useCycleInfo_1.useIsProposalButtonDisabled)(daoId);const handleChangeTab=newValue=>{setSelectedTab(newValue);};return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',style:{gap:42},children:[(0,jsx_runtime_1.jsx)(Hero_1.Hero,{children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,style:{display:'flex',justifyContent:'space-between'},children:[(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(HeroTitle_1.HeroTitle,{children:'Treasury'}),dao&&(0,jsx_runtime_1.jsx)(CopyAddress_1.CopyAddress,{address:dao.data.address,justifyContent:isMobileSmall?'center':'flex-start',typographyProps:{variant:'subtitle2'}})]}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,style:{display:'flex',alignItems:'center'},children:(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(MainButton_1.MainButton,{variant:'contained',color:'secondary',onClick:()=>setOpenTransfer(true),disabled:shouldDisable,children:'New Transfer'}),shouldDisable&&(0,jsx_runtime_1.jsx)(core_1.Tooltip,{placement:'bottom',title:'Not on proposal creation period',children:(0,jsx_runtime_1.jsx)(InfoIcon_1.InfoIcon,{color:'secondary'})})]})})})]})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Grid,{container:true,children:(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,children:[(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(StyledTab,{variant:'contained',style:selectedTab!==0?{borderTopRightRadius:0,borderBottomRightRadius:0,zIndex:0}:{borderRadius:4,zIndex:1},disableElevation:true,onClick:()=>handleChangeTab(0),isSelected:selectedTab===0,children:'Tokens'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(StyledTab,{disableElevation:true,variant:'contained',style:selectedTab!==1?{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:-1,zIndex:0}:{borderRadius:4,marginLeft:-1,zIndex:1},onClick:()=>handleChangeTab(1),isSelected:selectedTab===1,children:'NFTs'})}),(0,jsx_runtime_1.jsx)(core_1.Grid,{item:true,children:(0,jsx_runtime_1.jsx)(StyledTab,{disableElevation:true,variant:'contained',style:selectedTab!==1?{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:-1,zIndex:0}:{borderRadius:4,marginLeft:-1,zIndex:1},onClick:()=>handleChangeTab(2),isSelected:selectedTab===2,children:'History'})})]})})})}),(0,jsx_runtime_1.jsxs)(ItemGrid,{item:true,children:[(0,jsx_runtime_1.jsx)(TabPanel_1.TabPanel,{value:selectedTab,index:0,children:(0,jsx_runtime_1.jsx)(BalancesTable_1.BalancesTable,{})}),(0,jsx_runtime_1.jsx)(TabPanel_1.TabPanel,{value:selectedTab,index:1,children:(0,jsx_runtime_1.jsx)(NFTs_1.NFTs,{})}),(0,jsx_runtime_1.jsx)(TabPanel_1.TabPanel,{value:selectedTab,index:2,children:(0,jsx_runtime_1.jsx)(TransfersTable_1.TransfersTable,{transfers:transfers||[]})})]})]}),(0,jsx_runtime_1.jsx)(ProposalForm_1.ProposalFormContainer,{open:openTransfer,handleClose:onCloseTransfer,defaultTab:selectedTab,handleChangeTab:handleChangeTab})]});};exports.Treasury=Treasury;