'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.TransfersTable=void 0;const jsx_runtime_1=require('react/jsx-runtime');const dayjs_1=__importDefault(require('dayjs'));const react_1=require('react');const core_1=require('@material-ui/core');const hex_to_rgba_1=__importDefault(require('hex-to-rgba'));const useTezos_1=require('../../../../../services/beacon/hooks/useTezos');const ContentContainer_1=require('../../../components/ContentContainer');const bakingBad_1=require('../../../../../services/bakingBad');const Blockie_1=require('../../../../common/Blockie');const utils_1=require('../../../../../services/contracts/utils');const localizedFormat=require('dayjs/plugin/localizedFormat');dayjs_1.default.extend(localizedFormat);const TokenSymbol=(0,core_1.styled)(core_1.Typography)(({theme})=>({background:(0,hex_to_rgba_1.default)(theme.palette.secondary.main,0.11),borderRadius:4,color:theme.palette.secondary.main,padding:'1px 8px',boxSizing:'border-box',width:'min-content'}));const createData=transfer=>{return{token:transfer.name,date:(0,dayjs_1.default)(transfer.date).format('ll'),address:transfer.recipient,amount:transfer.amount.dp(10,1).toString(),hash:transfer.hash};};const TableContainer=(0,core_1.styled)(ContentContainer_1.ContentContainer)({width:'100%'});const RecipientText=(0,core_1.styled)(core_1.Typography)({marginLeft:8,marginTop:8});const Titles=['Transfer History','Date','Recipient','Amount'];const titleDataMatcher=(title,rowData)=>{switch(title){case'Transfer History':return rowData.token;case'Date':return rowData.date;case'Amount':return rowData.amount;case'Recipient':return rowData.address;case'Sender':return rowData.address;}};const MobileTableHeader=(0,core_1.styled)(core_1.Grid)({width:'100%',padding:20,borderBottom:'0.3px solid #3D3D3D'});const MobileTableRow=(0,core_1.styled)(core_1.Grid)({padding:'30px',borderBottom:'0.3px solid #3D3D3D'});const MobileTransfersTable=({data})=>{return(0,jsx_runtime_1.jsxs)(core_1.Grid,{container:true,direction:'column',alignItems:'center',children:[(0,jsx_runtime_1.jsx)(MobileTableHeader,{item:true,children:(0,jsx_runtime_1.jsx)(core_1.Typography,{align:'center',variant:'h4',color:'textPrimary',children:'Transfer History'})}),data.map((row,i)=>(0,jsx_runtime_1.jsx)(MobileTableRow,{item:true,container:true,direction:'column',alignItems:'center',style:{gap:19},children:Titles.map((title,j)=>(0,jsx_runtime_1.jsxs)(core_1.Grid,{item:true,children:[(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'h6',color:'secondary',align:'center',children:title==='Outbound Transfers'||title==='Inbound Transfers'?'Token:':title}),(0,jsx_runtime_1.jsx)(core_1.Typography,{variant:'h6',color:'textPrimary',align:'center',children:titleDataMatcher(title,row)})]},`transfersMobileItem-${j}`))},`transfersMobile-${i}`))]});};const DesktopTransfersTable=({data:rows,network})=>{return(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(0,jsx_runtime_1.jsxs)(core_1.Table,{children:[(0,jsx_runtime_1.jsx)(core_1.TableHead,{children:(0,jsx_runtime_1.jsx)(core_1.TableRow,{children:Titles.map((title,i)=>(0,jsx_runtime_1.jsx)(core_1.TableCell,{children:title},`tokentitle-${i}`))})}),(0,jsx_runtime_1.jsx)(core_1.TableBody,{children:rows.map((row,i)=>(0,jsx_runtime_1.jsxs)(core_1.TableRow,{component:core_1.Link,href:`https://${network==='mainnet'?'':bakingBad_1.networkNameMap[network]+'.'}tzkt.io/${row.hash}`,target:'_blank',children:[(0,jsx_runtime_1.jsx)(core_1.TableCell,{children:(0,jsx_runtime_1.jsx)(TokenSymbol,{children:row.token})}),(0,jsx_runtime_1.jsx)(core_1.TableCell,{children:row.date}),(0,jsx_runtime_1.jsxs)(core_1.TableCell,{style:{display:'flex',alignItems:'center'},children:[(0,jsx_runtime_1.jsx)(Blockie_1.Blockie,{address:row.address,size:24,style:{marginTop:8}}),(0,jsx_runtime_1.jsx)(RecipientText,{variant:'body2',children:(0,utils_1.toShortAddress)(row.address)})]}),(0,jsx_runtime_1.jsx)(core_1.TableCell,{children:row.amount})]},`tokenrow-${i}`))})]})});};const TransfersTable=({transfers})=>{const theme=(0,core_1.useTheme)();const isSmall=(0,core_1.useMediaQuery)(theme.breakpoints.down('sm'));const rows=(0,react_1.useMemo)(()=>{if(!transfers){return[];}return transfers.map(t=>createData(t));},[transfers]);const {network}=(0,useTezos_1.useTezos)();return(0,jsx_runtime_1.jsx)(TableContainer,{children:isSmall?(0,jsx_runtime_1.jsx)(MobileTransfersTable,{data:rows}):(0,jsx_runtime_1.jsx)(DesktopTransfersTable,{data:rows,network:network})});};exports.TransfersTable=TransfersTable;